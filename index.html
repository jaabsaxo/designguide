<!DOCTYPE html>
<html>

<body>
  <h1>Design Guide</h1>
  <form>
    <label for="fname">Paste endpoint here:</label><br>
    <input type="text" id="fname" name="fname"><br>
  </form>
  <br />
  <p id="scoreId">Review Score: 0 %</p>
  <br />
  <button onclick="checkScore()">Calculate score</button>
  <button onclick="Load()">Load</button>
  <button onclick="Save()">Save</button>
  <br />
  <br />

  <hr>
  
  <div>
    <h3 id="t-1">Title</h3>
    <div id="c-1">
      <table>
        <tr>
          <td>
            <div id="q-1">Does this work?</div>
          </td>
          <td>
            <div id="s-1"> Not Rated </div>
          </td>
        </tr>
      </table>
      <div id="e-1"></div>
    </div>
  </div>

  <hr>
  <h3>Basics</h3>
  <form>
    <label>Is the design resource centric?
      <input type="checkbox" id="q1" />
      Passed </label> <br /><br />
  </form>
  <form>
    <label>Does the design leak implementation details?
      <input type="checkbox" id="q2" />
      Passed </label><br /><br />
  </form>
  <p>Comments:</p>
  <input type="text" id="basicsfield" name="fname"><br>


  <h3>Routes</h3>
  <form>
    <label>Does the routes use plurals to represent collections?
      <input type="checkbox" id="q3" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Are there delimiters and spacers in path?
      <input type="checkbox" id="q4" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Is partner only resources in a /partner path?
      <input type="checkbox" id="q5" />
      Passed </label><br /><br />
  </form>
  <p>Comments:</p>
  <input type="text" id="routesfield" name="fname"><br>


  <h3>Http verbs</h3>
  <form>
    <label>Do they use the right HTTP verbs?
      <input type="checkbox" id="q6" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Do they use POST for getting resources when payload is large or PII data is present?
      <input type="checkbox" id="q7" />
      Passed </label><br /><br />
  </form>
  <p>Comments:</p>
  <input type="text" id="verbsfield" name="fname"><br>


  <h3>Relationships and nested resources</h3>
  <form>
    <label>Do they expose more than just the ids of related resources?
      <input type="checkbox" id="q8" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Do they use field groups to expose linked ressources?
      <input type="checkbox" id="q9" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Do they use sub-collections properly?
      <input type="checkbox" id="q10" />
      Passed </label><br /><br />
  </form>
  <p>Comments:</p>
  <input type="text" id="nestingfield" name="fname"><br>


  <h3>Datatypes and serialization</h3>
  <form>
    <label>Is everything pascal cased?
      <input type="checkbox" id="q11" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Are property names in nested arrays in plural?
      <input type="checkbox" id="q12" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Do they use dates and datetimes right?
      <input type="checkbox" id="q13" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Does ids expose any data?
      <input type="checkbox" id="q14" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Are there any "bleed" through of .net data types?
      <input type="checkbox" id="q15" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Do they use booleans right?
      <input type="checkbox" id="q16" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Are they using simple types when they should?
      <input type="checkbox" id="q17" />
      Passed </label><br /><br />
  </form>
  <p>Comments:</p>
  <input type="text" id="datatypesfield" name="fname"><br>


  <h3>Naming</h3>
  <form>
    <label>Are any names redundant?
      <input type="checkbox" id="q18" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Do they use the same name for the same thing?
      <input type="checkbox" id="q19" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Do they use the type for the same thing?
      <input type="checkbox" id="q20" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Do they return properties without values?
      <input type="checkbox" id="q21" />
      Passed </label><br /><br />
  </form>
  <p>Comments:</p>
  <input type="text" id="namingfield" name="fname"><br>


  <h3>Returning a collection</h3>
  <form>
    <label>Do they use the collection envelope properly?
      <input type="checkbox" id="q22" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Is pagination offered when it should be?
      <input type="checkbox" id="q23" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Are they using other than 200 OK or 400 Bad Request?
      <input type="checkbox" id="q24" />
      Passed </label><br /><br />
  </form>
  <p>Comments:</p>
  <input type="text" id="collectionfield" name="fname"><br>


  <h3>Returning a resource</h3>
  <form>
    <label>Are they using collection envelopes for single resources?
      <input type="checkbox" id="q25" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Are they using other than 200 OK or 404 Not Found?
      <input type="checkbox" id="q26" />
      Passed </label><br /><br />
  </form>
  <p>Comments:</p>
  <input type="text" id="returningresourcefield" name="fname"><br>


  <h3>Creating a resource</h3>
  <form>
    <label>Do they use POST or PUT right?
      <input type="checkbox" id="q27" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Are there deadends after creation?
      <input type="checkbox" id="q28" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Do they use the right status code?
      <input type="checkbox" id="q29" />
      Passed </label><br /><br />
  </form>
  <p>Comments:</p>
  <input type="text" id="creatingresourcefield" name="fname"><br>


  <h3>Updating a resource</h3>
  <form>
    <label>Does it make sense to update the entire resource with PUT?
      <input type="checkbox" id="q30" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Or should they use Patch instead for an partial update?
      <input type="checkbox" id="q31" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Do they use 200 OK, 204 No contenet or 400 Bad Request right?
      <input type="checkbox" id="q32" />
      Passed </label><br /><br />
  </form>
  <p>Comments:</p>
  <input type="text" id="updatingresourcefield" name="fname"><br>


  <h3>Streaming</h3>
  <form>
    <label>Is streaming initiated with a subscription?
      <input type="checkbox" id="q33" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Do they use the common subscription request model?
      <input type="checkbox" id="q34" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Do they provide a snapshot in the subscription response?
      <input type="checkbox" id="q35" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Can subscriptions be deleted?
      <input type="checkbox" id="q36" />
      Passed </label><br /><br />
  </form>
  <p>Comments:</p>
  <input type="text" id="streamingfield" name="fname"><br>


  <h3>Visibility and user roles</h3>
  <form>
    <label>Does visibility make sense?
      <input type="checkbox" id="q37" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>Does user roles make sense?
      <input type="checkbox" id="q38" />
      Passed </label><br /><br />
  </form>
  <form>
    <label>have they considered market data restrictions?
      <input type="checkbox" id="q39" />
      Passed </label><br /><br />
  </form>
  <p>Comments:</p>
  <input type="text" id="rolesfield" name="fname"><br>


  <script>
    document.getElementById('fname').style.width = "800px";
    document.getElementById('routesfield').style.width = "800px";
    document.getElementById('streamingfield').style.width = "800px";
    document.getElementById('updatingresourcefield').style.width = "800px";
    document.getElementById('creatingresourcefield').style.width = "800px";
    document.getElementById('returningresourcefield').style.width = "800px";
    document.getElementById('collectionfield').style.width = "800px";
    document.getElementById('namingfield').style.width = "800px";
    document.getElementById('datatypesfield').style.width = "800px";
    document.getElementById('nestingfield').style.width = "800px";
    document.getElementById('verbsfield').style.width = "800px";
    document.getElementById('rolesfield').style.width = "800px";
    document.getElementById('basicsfield').style.width = "800px";

    function Test() {
      console.log("Test")
    }

    function SetToggleState() {
      console.log(event)
      console.log(event.target)
      console.log(event.target.id)
      let elementNumber = event.target.id.split("-")[1];
      if (elementNumber) {
        let elementId = "s-" + elementNumber;
        let currentState = document.getElementById(elementId).innerHTML;
        if (currentState == "Not Rated") {
          document.getElementById(elementId).innerHTML = "✅";
          document.getElementById("e-" + elementNumber).innerHTML = "";
        } else if (currentState == "✅") {
          document.getElementById(elementId).innerHTML = "❌";
          document.getElementById("e-" + elementNumber).innerHTML = "<p>Comments:</p> <input type=\"text\" id=\"xx\" name=\"fname\"><br>"
          document.getElementById('xx').style.width = "800px";
        } else {
          document.getElementById(elementId).innerHTML = "Not Rated";
          document.getElementById("e-" + elementNumber).innerHTML = "";
        }
      }
    }

    function CollapseOrExpand() {
      let elementNumber = event.target.id.split("-")[1];
      console.log(elementNumber)
      if (elementNumber) {
        let elementId = "c-" + elementNumber;
        console.log(document.getElementById(elementId).innerHTML)
        if (document.getElementById(elementId).innerHTML == "") {
          document.getElementById(elementId).innerHTML = "<table><tr><td><div id=\"q-1\">Does this work?</div></td><td><div id=\"s-1\"> Not Rated </div></td></tr></table><div id=\"e-1\"></div>"
        } else {
          console.log("Should go here")
          document.getElementById(elementId).innerHTML = "";
        }
        addListeners(elementNumber);
      }
    }

    function addListeners(n) {
      document.getElementById("q-"+n).addEventListener("click", SetToggleState);
      document.getElementById("s-"+n).addEventListener("click", SetToggleState);
      document.getElementById("t-"+n).addEventListener("click", CollapseOrExpand);
    }

    addListeners(1);

  
    



    document.getElementById("fname").value = localStorage.getItem("gghfj-previous-endpoint")

    function checkScore() {
      var score = 0;
      var number_of_checks = 0;

      var all = document.getElementsByTagName("input");

      for (let item of all) {
        if (item.type == "checkbox") {
          if (document.getElementById(item.id).checked) {
            score += 1;
          }
          number_of_checks += 1;
        }
      }
      var score = Math.round((score / number_of_checks) * 1000) / 10;
      document.getElementById("scoreId").innerHTML = "Review Score: " + score + "%"
    }


    function Save() {

      var all = document.getElementsByTagName("input");
      var state = {
        "checkbox": {},
        "text": {}
      };

      for (let item of all) {
        if (item.type == "checkbox") {
          k = item.id
          v = document.getElementById(k).checked
          state["checkbox"][k] = v;
        }
        if (item.type == "text") {
          if (item.id != "fname") {
            k = item.id
            v = document.getElementById(k).value
            state["text"][k] = v;
          }
        }
      }


      var endpoint = document.getElementById("fname").value
      localStorage.setItem(endpoint, JSON.stringify(state));
      localStorage.setItem("gghfj-previous-endpoint", endpoint);
    }

    function Load() {
      var endpoint = document.getElementById("fname").value
      let state = JSON.parse(localStorage.getItem(endpoint));
      for (var key in state["checkbox"]) {
        if (state["checkbox"][key] == true) {
          document.getElementById(key).checked = true
        }
      }
      for (var key in state["text"]) {
        document.getElementById(key).value = state["text"][key]
      }
    }
  </script>

</body>

</html>